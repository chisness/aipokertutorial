# Solving RPS and Poker with CFR {#sec-cfrrpspoker}


Bet capping: Even when holding the strongest hand — a pair of aces — the strategy caps the betting less than 0.01% of the time

### RPS Regret Matching Experiment
Here we show that regret matching converges only using the average strategy over 10,000 iterations: 

<!-- ![](assets/rps_avg.png) -->

The bottom shows both players converging to $1/3$, while the top shows Player 1's volatile current strategies that are cycling around. 

Suppose that your opponent Player 2 is playing 40% Rock, 30% Paper, and 30% Scissors. Here is a regret matching 10,000 game experiment. It shows that it takes around 1,600 games before Player 1 plays only Paper (this will vary). 

<!-- ![](assets/rps_rm.png) -->

We see that if there is a fixed player, regret matching converges to the best strategy. 

But what if your opponent is not using a fixed strategy? We'll talk about that soon. 

## Data: Talk Paper Scissors
[eieio games](https://eieio.games/nonsense/game-13-talk-paper-scissors/) made a Rock Paper Scissors over voice game in which players call a phone number and get matched up with another player for a 3 game RPS match. 

They published their 40,000 round data on X: 

<!-- ![](assets/tps.png) -->
**Overall: R 37.2%, P 35.4%, S 27.4%**

<!-- ![](assets/tpsr1.png) -->
**Round 1: R 39.7%, P 37.6%, S 22.7%**

<!-- ![](assets/tpsr2.png) -->
**Round 2: R 34.0%, 33.4%, 32.6%**

<!-- ![](assets/tpsr3.png) -->
**Round 3: R 37.2%, 34.7%, 28.1%**

:::{.callout-note  appearance="minimal"}
## Expected Value Against TPS Player
What is the best strategy per round against the average TPS player? What is your expected value per round and overall?
:::

:::{.callout-warning collapse="true" appearance="minimal"}
## Solution
The best strategy is to always play Paper. 

$\mathbb{E}(\text{Round 1}) = 0.397*1 + 0.376*0 + 0.227*-1 = 0.17$

$\mathbb{E}(\text{Round 2}) = 0.34*1 + 0.334*0 + 0.326*-1 = 0.014$

$\mathbb{E}(\text{Round 3}) = 0.372*1 + 0.347*0 + 0.281*-1 = 0.091$

$\mathbb{E}(\text{Round 4}) = 0.17 + 0.014 + 0.091 = 0.275$

:::